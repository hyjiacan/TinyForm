/**
 * TinyForm 0.7.4 core 2017-03-12
 * @作者: hyjiacan
 * @源码: https://git.oschina.net/hyjiacan/TinyForm.git
 * @示例: http://hyjiacan.oschina.io/tinyform
 * @许可协议: MIT
 * @依赖: jQuery 1.8.0及更高版本
 * @浏览器支持: 不支持IE7及更低版本
 * @QQ群: 187786345 (Javascript爱好者)
 */
!function(a,b){"use strict";function c(){return"tiny"+(new Date).getTime()+Math.random().toString().substring(2)}function d(b,e){var g=a(b).first(),i=g.attr(f);return i&&h.hasOwnProperty(i)||(i=c(),g.attr(f,i),h[i]=new d.prototype.setup(g,e,i)),h[i]}function e(b){var c=i[b.id]={},d=a.makeArray(b.option.ignore);b.context.find(b.option.selector).each(function(){var b=a.trim(a(this).attr("name"));if(""!==b&&d.indexOf(b)===-1)return void 0===c[b]||0===c[b].length?void(c[b]=a(this)):a(this).is(":radio")?void c[b].push(this):void console.error('控件的name属性"'+b+'"出现多次，这不对吧')})}var f="data-tinyform",g={setup:[],refresh:[]},h={},i={};d.prototype={constructor:d,setup:function(b,c,f){var h=this;return h.id=f,h.option=a.extend(!0,{},d.defaults,c),h.context=b,e(h),a.each(g.setup,function(){this.call(h)}),h},getField:function(b){var c=a.extend(!0,{},i[this.id]);if(0===arguments.length)return c;if("string"==typeof b){var d=c[b];if(c.hasOwnProperty(b)&&0!==d.length)return d}},refresh:function(){var b=this;return e(b),a.each(g.refresh,function(){this.call(b)}),b}},Object.defineProperty(d,"extend",{configurable:!1,value:function(b){var c=a.extend(!0,{},b);c.hasOwnProperty("setup")&&(g.setup.push(c.setup),delete c.setup),c.hasOwnProperty("refresh")&&(g.refresh.push(c.refresh),delete c.refresh),a.each(c,function(a,b){if(this.hasOwnProperty(a))return void console.error("插件添加方法失败: 此方法已经存在");d.prototype[a]=b})}}),d.defaults={selector:"input[name]:not(:button,:submit,:reset,[data-ignore]), select[name]:not([data-ignore]), textarea[name]:not([data-ignore])",ignore:!1},d.prototype.setup.prototype=d.prototype,b.TinyForm=d}(jQuery,window),function(a,b){"use strict";function c(a,b,c){if(c&&0!==c.length){if(c.is(":radio"))return void c.prop("checked",!1).filter("[value="+b+"]:first").prop("checked",!0);if(c.is(":checkbox"))return void c.prop("checked",b.toString()===a.option.checkbox[0].toString());c.val(b),c.is("select")&&c.change()}}function d(b){var c={};return a.each(b.getField(),function(a){c[a]=e(b,a)}),c}function e(a,b){var c=a.getField(b);return c.is("input")?f(a,c):c.val()}function f(a,b){return b.is(":radio")?b.filter(":checked").val():b.is(":checkbox")?b.is(":checked")?a.option.checkbox[0]:a.option.checkbox[1]:b.val()}var g={};a.extend(!0,b.defaults,{checkbox:[!0,!1],beforeSubmit:!1}),b.extend({setup:function(){g[this.id]=this.getData()},getData:function(a){if(0===arguments.length)return d(this);if("string"==typeof a)return e(this,a)},setData:function(b,d){var e=this;return 0===arguments.length?(console.error("setData 需要至少1个参数"),e):arguments.length>=2?"string"!=typeof d?e:(c(e,b,e.getField(d)),e):(a.each(e.getField(),function(a,d){var f=b[a];void 0!==f&&null!==f||(f=""),c(e,f,d)}),e)},submit:function(b){var c=this;if(b=a.extend({url:c.context.attr("action"),type:c.context.attr("method")||"post",async:!0,data:c.getData(),cache:!1},b),!a.isFunction(c.option.beforeSubmit)||c.option.beforeSubmit.call(c,b)!==!1)return a.ajax(b)},reset:function(){return a.isFunction(this.context.get(0).reset)?this.context.get(0).reset():this.setData(g[this.id]),this}})}(jQuery,TinyForm);