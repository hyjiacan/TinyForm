!function(t,e){"use strict";function n(){return"tiny"+(new Date).getTime()+Math.random().toString().substring(2)}function r(e,i){var o=t(e).first(),u=o.attr(s);return u&&c.hasOwnProperty(u)||(u=n(),o.attr(s,u),c[u]=new r.prototype.setup(o,i,u)),c[u]}function i(e){var n=h[e.id]={};e.context.find(e.option.selector).each(function(){var e=t.trim(t(this).attr("name"));if(""!==e)return"undefined"==typeof n[e]||0===n[e].length?void(n[e]=t(this)):t(this).is("[type=radio]")?void n[e].push(this):void console.error('控件的name属性"'+e+'"出现多次，这不对吧')})}var o="input[name]:not([type=button][type=submit][type=reset]), select[name], textarea[name]",s="data-tinyform",u="插件添加方法失败: 此方法已经存在",a={setup:[],refresh:[]},c={},h={};r.prototype={constructor:r,setup:function(e,n,r){var s=this;return s.id=r,s.option=t.extend(!0,{selector:o},n),s.context=e,i(s),t.each(a.setup,function(){this.call(s)}),s},getField:function(e){var n=t.extend(!0,{},h[this.id]);if(0===arguments.length)return n;if("string"==typeof e){var r=n[e];if(n.hasOwnProperty(e)&&0!==r.length)return r}},refresh:function(){var e=this;return i(e),t.each(a.refresh,function(){this.call(e)}),e}},Object.defineProperty(r,"extend",{configurable:!1,value:function(e){var n=t.extend(!0,{},e);n.hasOwnProperty("setup")&&(a.setup.push(n.setup),delete n.setup),n.hasOwnProperty("refresh")&&(a.refresh.push(n.refresh),delete n.refresh),t.each(n,function(t,e){return this.hasOwnProperty(t)?void console.error(u):void(r.prototype[t]=e)})}}),r.prototype.setup.prototype=r.prototype,e.TinyForm=r}(jQuery,window),function(t,e){"use strict";function n(t,e,n){if(0!==n.length)return n.is("[type=radio]")?void n.prop("checked",!1).filter("[value="+e+"]:first").prop("checked",!0):n.is("[type=checkbox]")?void n.prop("checked",!!e):void n.val(e)}function r(e){var n={};return t.each(e.getField(),function(t){n[t]=i(e,t)}),n}function i(t,e){var n=t.getField(e);return n.is("input")?o(n):n.val()}function o(t){return t.is("[type=radio]")?t.filter(":checked").val():t.is("[type=checkbox]")?t.is(":checked"):t.val()}var s={};e.extend({setup:function(){s[this.id]=this.getData()},getData:function(t){if(0===arguments.length)return r(this);if("string"==typeof t)return i(this,t)},setData:function(e,r){var i=this;return 0===arguments.length?(console.error("setData 需要至少1个参数"),i):arguments.length>=2?"string"!=typeof r?i:(n(i,e,i.getField(r)),i):(t.each(i.getField(),function(t,r){var o=e[t];"undefined"!=typeof o&&null!==o||(o=""),n(i,o,r)}),i)},submit:function(e){var n=this;return e=t.extend({url:n.context.attr("action"),type:n.context.attr("method")||"post",async:!0,data:n.getData(),cache:!1},e),t.isFunction(n.option.beforeSubmit)&&n.option.beforeSubmit.call(n,e),t.ajax(e),n},reset:function(){return t.isFunction(this.context.get(0).reset)?this.context.get(0).reset():this.setData(s[this.id]),this}})}(jQuery,TinyForm);